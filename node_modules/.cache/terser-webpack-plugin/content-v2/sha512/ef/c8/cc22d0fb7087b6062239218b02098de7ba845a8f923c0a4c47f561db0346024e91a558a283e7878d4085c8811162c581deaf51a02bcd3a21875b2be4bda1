{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[89],{245:function(t,e,a){\"use strict\";a.r(e);var n=a(0),s=Object(n.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[a(\"h2\",{attrs:{id:\"服务注册中心——zookeeper\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#服务注册中心——zookeeper\"}},[t._v(\"#\")]),t._v(\" 服务注册中心——Zookeeper\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"zookeeper-用作注册中心\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#zookeeper-用作注册中心\"}},[t._v(\"#\")]),t._v(\" Zookeeper 用作注册中心\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"zookeeper可以充当一个服务注册表（Service Registry），让多个服务提供者形成一个集群，让服务消费者通过服务注册表获取具体的服务访问地址（ip+端口）去访问具体的服务提供者。\")]),t._v(\" \"),a(\"li\",[t._v(\"在zookeeper中，进行服务注册，实际上就是在zookeeper中创建了一个znode节点，该节点存储了该服务的IP、端口、调用方式(协议、序列化方式)等。\")]),t._v(\" \"),a(\"li\",[t._v(\"zookeeper提供了“心跳检测”功能，它会定时向各个服务提供者发送一个请求（实际上建立的是一个 socket 长连接），如果长期没有响应，服务中心就认为该服务提供者已经“挂了”，并将其剔除。\")])]),t._v(\" \"),a(\"h3\",{attrs:{id:\"单机版zookeeper服务注册中心\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#单机版zookeeper服务注册中心\"}},[t._v(\"#\")]),t._v(\" 单机版zookeeper服务注册中心\")]),t._v(\" \"),a(\"h4\",{attrs:{id:\"启动zk\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#启动zk\"}},[t._v(\"#\")]),t._v(\" 启动ZK\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"下载解压zookeeper安装包\")]),t._v(\" \"),a(\"li\",[t._v(\"启动zkServer.sh和zkCli.sh\")])]),t._v(\" \"),a(\"h4\",{attrs:{id:\"聚合项目新建一个module\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#聚合项目新建一个module\"}},[t._v(\"#\")]),t._v(\" 聚合项目新建一个Module\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[t._v(\"pom.xml\")])]),t._v(\" \"),a(\"div\",{staticClass:\"language-pom extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[a(\"code\",[t._v('<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n<project xmlns=\"http://maven.apache.org/POM/4.0.0\"\\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\">\\n    <parent>\\n        <artifactId>cloud2020</artifactId>\\n        <groupId>com.ws.springcloud</groupId>\\n        <version>1.0-SNAPSHOT</version>\\n    </parent>\\n    <modelVersion>4.0.0</modelVersion>\\n\\n    <artifactId>cloud-provider-payment8003</artifactId>\\n\\n    <dependencies>\\n        \\x3c!--api模块包括了spring-boot-starter-web--\\x3e\\n        <dependency>\\n            <groupId>com.ws.springcloud</groupId>\\n            <artifactId>api</artifactId>\\n            <version>${project.version}</version>\\n        </dependency>\\n        <dependency>\\n            <groupId>org.springframework.boot</groupId>\\n            <artifactId>spring-boot-starter-actuator</artifactId>\\n        </dependency>\\n        \\x3c!--zookeeper--\\x3e\\n        <dependency>\\n            <groupId>org.springframework.cloud</groupId>\\n            <artifactId>spring-cloud-starter-zookeeper-discovery</artifactId>\\n            <exclusions>\\n                <exclusion>\\n                    <groupId>org.apache.zookeeper</groupId>\\n                    <artifactId>zookeeper</artifactId>\\n                </exclusion>\\n            </exclusions>\\n        </dependency>\\n        \\x3c!--排除自带的3.5.5beta版,添加和zookeeper安装包相同的版本--\\x3e\\n        <dependency>\\n            <groupId>org.apache.zookeeper</groupId>\\n            <artifactId>zookeeper</artifactId>\\n            <version>3.5.6</version>\\n        </dependency>\\n        <dependency>\\n            <groupId>org.springframework.boot</groupId>\\n            <artifactId>spring-boot-devtools</artifactId>\\n            <scope>runtime</scope>\\n            <optional>true</optional>\\n        </dependency>\\n        <dependency>\\n            <groupId>org.springframework.boot</groupId>\\n            <artifactId>spring-boot-starter-test</artifactId>\\n            <scope>test</scope>\\n        </dependency>\\n    </dependencies>\\n    <build>\\n        <plugins>\\n            <plugin>\\n                <groupId>org.apache.maven.plugins</groupId>\\n                <artifactId>maven-compiler-plugin</artifactId>\\n                <configuration>\\n                    <source>1.8</source>\\n                    <target>1.8</target>\\n                </configuration>\\n            </plugin>\\n            <plugin>\\n                <groupId>org.springframework.boot</groupId>\\n                <artifactId>spring-boot-maven-plugin</artifactId>\\n                <executions>\\n                    <execution>\\n                        <goals>\\n                            <goal>repackage</goal>\\n                        </goals>\\n                    </execution>\\n                </executions>\\n            </plugin>\\n        </plugins>\\n    </build>\\n</project>\\n')])])]),a(\"ul\",[a(\"li\",[t._v(\"yml配置\")])]),t._v(\" \"),a(\"div\",{staticClass:\"language-yml extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-yml\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"server\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n  \"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"port\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"8003\")]),t._v(\"\\n\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"spring\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n  \"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"application\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"name\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" cloud\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"payment\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"-\")]),t._v(\"service\\n  \"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"cloud\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"zookeeper\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"#此处zk的IP配你自己的zk\")]),t._v(\"\\n      \"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[t._v(\"connect-string\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),t._v(\" localhost\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\":\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"2181\")]),t._v(\"\\n\")])])]),a(\"ul\",[a(\"li\",[t._v(\"入口类\")])]),t._v(\" \"),a(\"div\",{staticClass:\"language-java extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-java\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@SpringBootApplication\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token annotation punctuation\"}},[t._v(\"@EnableDiscoveryClient\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"class\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"PaymentZK\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"public\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"static\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"void\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"main\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"String\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" args\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"SpringApplication\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"run\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),a(\"span\",{pre:!0,attrs:{class:\"token class-name\"}},[t._v(\"PaymentZK\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),a(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"class\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\"args\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\"\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])])]),a(\"h4\",{attrs:{id:\"之后可以进入zkcli-sh查看服务是否注册上，consumer同理也可注册上\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#之后可以进入zkcli-sh查看服务是否注册上，consumer同理也可注册上\"}},[t._v(\"#\")]),t._v(\" 之后可以进入zkCli.sh查看服务是否注册上，consumer同理也可注册上\")]),t._v(\" \"),a(\"h3\",{attrs:{id:\"zk-、consul-和-eureka-作为注册中心异同点\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#zk-、consul-和-eureka-作为注册中心异同点\"}},[t._v(\"#\")]),t._v(\" ZK 、Consul 和 Eureka 作为注册中心异同点\")]),t._v(\" \"),a(\"ul\",[a(\"li\",[a(\"strong\",[t._v(\"CAP\")]),t._v(\" ：  指的是在一个分布式系统中，一致性（Consistency）、可用性（Availability）、分区容错性（Partition tolerance）。\")]),t._v(\" \"),a(\"li\",[t._v(\"这三个要素最多只能同时实现两点，不可能三者兼顾。\")]),t._v(\" \"),a(\"li\",[t._v(\"分布式永远需要满足P，所以只能选择AP或CP\")])]),t._v(\" \"),a(\"table\",[a(\"thead\",[a(\"tr\",[a(\"th\",[t._v(\"组件名\")]),t._v(\" \"),a(\"th\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"语言\")]),t._v(\" \"),a(\"th\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"CAP\")]),t._v(\" \"),a(\"th\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"服务健康检查\")]),t._v(\" \"),a(\"th\",{staticStyle:{\"text-align\":\"right\"}},[t._v(\"对外暴露接口\")]),t._v(\" \"),a(\"th\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"SpringCloud集成\")])])]),t._v(\" \"),a(\"tbody\",[a(\"tr\",[a(\"td\",[t._v(\"Eureka\")]),t._v(\" \"),a(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"java\")]),t._v(\" \"),a(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"AP\")]),t._v(\" \"),a(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"可配支持\")]),t._v(\" \"),a(\"td\",{staticStyle:{\"text-align\":\"right\"}},[t._v(\"HTTP\")]),t._v(\" \"),a(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"是\")])]),t._v(\" \"),a(\"tr\",[a(\"td\",[t._v(\"Consul\")]),t._v(\" \"),a(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"GO\")]),t._v(\" \"),a(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"CP\")]),t._v(\" \"),a(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"支持\")]),t._v(\" \"),a(\"td\",{staticStyle:{\"text-align\":\"right\"}},[t._v(\"HTTP/DNS\")]),t._v(\" \"),a(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"是\")])]),t._v(\" \"),a(\"tr\",[a(\"td\",[t._v(\"Zookeeper\")]),t._v(\" \"),a(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"java\")]),t._v(\" \"),a(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"CP\")]),t._v(\" \"),a(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"支持\")]),t._v(\" \"),a(\"td\",{staticStyle:{\"text-align\":\"right\"}},[t._v(\"客户端\")]),t._v(\" \"),a(\"td\",{staticStyle:{\"text-align\":\"center\"}},[t._v(\"是\")])])])])])}),[],!1,null,null,null);e.default=s.exports}}]);","extractedComments":[]}